<div class="bg-white rounded-lg shadow-2xl max-w-lg w-full p-6 mx-auto">

  <div class="flex justify-between items-center pb-4 border-b border-gray-200 relative">
    <h2 class="text-xl font-semibold text-gray-800">Crear nueva certificación</h2>
    <button 
      (click)="onCancel()" 
      aria-label="Cerrar" 
      class="text-gray-400 hover:text-gray-600 transition duration-150 absolute top-0 right-0 p-2 -mt-2 -mr-2">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <form [formGroup]="certificationForm" class="py-6 space-y-4">
    
    <div>
      <mat-form-field appearance="outline" class="block w-full">
        <mat-label>Tipo de Certificacion</mat-label>
        
        <mat-select 
          matSelect="outlined"
          formControlName="type" 
          required 
          class="block w-full text-gray-700"
        >
          <mat-option value="ged">Diversificado</mat-option>
          <mat-option value="bachelors">Licenciatura</mat-option>
          <mat-option value="masters">Maestría</mat-option>
          <mat-option value="phd">Doctorado</mat-option>
          <mat-option value="certification">Certificación</mat-option>
        </mat-select>
        <mat-error *ngIf="certificationForm.get('type')?.hasError('required')">
          El tipo es obligatorio.
        </mat-error>
      </mat-form-field>
    </div>

    <div>
      <label for="organization" class="block text-sm font-medium text-gray-700">Organizacion</label>
      <input 
        id="organization"
        formControlName="organization" 
        type="text" 
        required 
        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
      <p 
        *ngIf="certificationForm.get('organization')?.hasError('required') && certificationForm.get('organization')?.touched" 
        class="mt-1 text-xs text-red-600">
        La organización es obligatoria.
      </p>
    </div>

    <div>
      <label for="credential" class="block text-sm font-medium text-gray-700">Titulo</label>
      <input 
        id="credential"
        formControlName="acquired_credential" 
        type="text" 
        required 
        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
      <p 
        *ngIf="certificationForm.get('acquired_credential')?.hasError('required') && certificationForm.get('acquired_credential')?.touched" 
        class="mt-1 text-xs text-red-600">
        La credencial es obligatoria.
      </p>
    </div>

    <div>
      <label for="year" class="block text-sm font-medium text-gray-700">Año (YYYY)</label>
      <input 
        id="year"
        formControlName="year" 
        type="number" 
        required 
        min="1900" 
        max="2100" 
        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
      <p 
        *ngIf="certificationForm.get('year')?.hasError('required') && certificationForm.get('year')?.touched" 
        class="mt-1 text-xs text-red-600">
        El año es obligatorio.
      </p>
      <p 
        *ngIf="certificationForm.get('year')?.hasError('pattern') && certificationForm.get('year')?.touched" 
        class="mt-1 text-xs text-red-600">
        El año debe ser un número de 4 dígitos (Ej: 2024).
      </p>
    </div>
  </form>

  <div class="flex items-center justify-between pt-4 border-t border-gray-200 space-x-3">
    
    <button 
      matButton="outlined"
      (click)="onCancel()" 
      class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition duration-150">
      Cancelar
    </button>
    
    <button 
      matButton="elevated"
      (click)="onSave()" 
      [disabled]="certificationForm.invalid"
      [ngClass]="{
        'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500': !certificationForm.invalid,
        'bg-blue-400 cursor-not-allowed': certificationForm.invalid
      }"
      class="px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition duration-150">
      Guardar
    </button>
  </div>
</div>